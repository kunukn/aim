!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).aim=t()}(this,function(){"use strict";var e=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})};function aim(n){return function(n){var i=n.target;delete n.target;var r=s(i);r.options=n;var c=e();return t.push({id:c,target:i,data:r}),c}(n)}var t=[],n=function(e,t,n){return Math.min(Math.max(e,t),n)},i=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},r={x:0,y:0},c=i(r),a={x:0,y:0},o=12,m=0,f=0,x=!1,u={size:50,center:{x:0,y:0},effectiveSize:1};function anticipateFunc(e,t,r,a,m){var f=m;e.x&&e.y&&(t.x=.7*t.x+.3*(r-e.x),t.y=.7*t.y+.3*(a-e.y)),e.x=r,e.y=a,(c=i(t))<.1&&(t.x=0,t.y=0),f.effectiveSize=Math.sqrt(f.size*c+1),f.center.x=.7*f.center.x+.3*(e.x+t.x*o);var x=window.innerWidth,u=window.innerHeigh;n(f.center.x,0,x-f.effectiveSize),f.rect.x0=f.center.x-f.effectiveSize,f.rect.x1=f.center.x+f.effectiveSize,f.center.y=.7*f.center.y+.3*(e.y+t.y*o),n(f.center.y,0,u-f.effectiveSize),f.rect.y0=f.center.y-f.effectiveSize,f.rect.y1=f.center.y+f.effectiveSize}u.rect={x0:0,y0:0,x1:u.size,y1:u.size},aim.setDebug=function(e){var t,n,i=document.querySelector("#aim-debug");if(e){if(i)return;var r=(t=u.size,(n=document.createElement("div")).setAttribute("id","aim-debug"),n.className="aim-debug",n.style.width=2*t+"px",n.style.height=2*t+"px",n.style["margin-left"]=-t+"px",n.style["margin-top"]=-t+"px",document.body.appendChild(n),n);u.element=r}else i&&i.remove(),u.element=null;x=e},aim.setAnticipateFunction=function(e){"function"==typeof e&&(anticipateFunc=e)};var s=function(e){var t=null;e instanceof HTMLElement&&(t=e.getBoundingClientRect());var n=t||e,i=n.x,r=n.y;return{rect:{x0:i,y0:r,x1:i+n.width,y1:r+n.height},center:{x:i,y:r},increment:0}};var l=function(){var e=u;t.length&&(anticipateFunc(a,r,m,f,e),x&&(e.element.style.transform="translate(".concat(e.center.x,"px, ").concat(e.center.y,"px) scale(").concat(e.effectiveSize/e.size,")")),t.forEach(function(t){var n,i,r=t.target,a=t.data,o=(n=a.rect,i=e.rect,Math.max(0,Math.min(n.x1,i.x1)-Math.max(n.x0,i.x0))*Math.max(0,Math.min(n.y1,i.y1)-Math.max(n.y0,i.y0))/(u.effectiveSize*u.effectiveSize));if(o&&0!==c)return a.increment=a.increment+.2*o,void(a.increment>1&&a.increment<2?(a.options.className&&r.classList.add(a.options.className),"function"==typeof a.options.aimEnter&&a.options.aimEnter.call(r,{}),a.increment>2&&(a.increment=2),x&&(e.element.style["background-color"]="tomato")):a.increment>2&&(a.increment=2,x&&(e.element.style["background-color"]="tomato")));x&&(e.element.style["background-color"]="yellowgreen"),0!==a.increment&&(a.increment=a.increment-.05,a.increment<0&&(a.increment=0,a.options.className&&r.classList.remove(a.options.className),"function"==typeof a.options.aimExit&&a.options.aimExit.call(r,{})))}))},d=!0,y=function(e){m=e.clientX,f=e.clientY},v=!1;return aim.start=function(){v||(v=!0,document.addEventListener("pointermove",y),d=!0,function run(){var e;l(),d?e=requestAnimationFrame(run):cancelAnimationFrame(e)}())},aim.stop=function(){v&&(v=!1,d=!1,document.removeEventListener("pointermove",y))},aim.remove=function(e){var n=!1;return e instanceof HTMLElement?t.forEach(function(t){if(t.target===e)return t=null,void(n=!0)}):t.forEach(function(t){if(t.id===e.id)return t=null,void(n=!0)}),n&&(t=t.filter(Boolean)),n},aim.updatePosition=function(e){var n=!1;return e instanceof HTMLElement?t.forEach(function(t){if(t.target===e){var i=s(e);return t.data.rect=i.rect,t.data.center=i.center,t.data.increment=i.increment,void(n=!0)}}):t.forEach(function(t){if(t.id===e.id){var i=s(e);return t.data.rect=i.rect,t.data.center=i.center,t.data.increment=i.increment,void(n=!0)}}),n},aim});
//# sourceMappingURL=aim.umd.js.map
