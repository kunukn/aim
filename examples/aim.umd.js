!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).aim=t()}(this,function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t=function(e){return[].slice.call(document.querySelectorAll(e),0)},n=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})};function i(i){var c=i.target,a=function(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),r.forEach(function(n){e(t,n,i[n])})}return t}({},i);if(delete a.target,"string"==typeof c){var o=t(c);if(o&&o.length){var f=[];return o.forEach(function(e){var t=n();r.push({id:t,target:e,data:v(e),options:a}),f.push(t)}),1===o.length?f[0]:f}}var u=n();return r.push({id:u,target:c,data:v(c),options:a}),u}var r=[],c=function(e,t,n){return Math.min(Math.max(e,t),n)},a=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},o={x:0,y:0},f=a(o),u={x:0,y:0},m=12,x=0,l=0,s=!1,d={size:50,center:{x:0,y:0},effectiveSize:1};function y(e,t,n,i,r){var o=r;e.x&&e.y&&(t.x=.7*t.x+.3*(n-e.x),t.y=.7*t.y+.3*(i-e.y)),e.x=n,e.y=i,(f=a(t))<.1&&(t.x=0,t.y=0),o.effectiveSize=Math.sqrt(o.size*f+1),o.center.x=.7*o.center.x+.3*(e.x+t.x*m);var u=window.innerWidth,x=window.innerHeigh;c(o.center.x,0,u-o.effectiveSize),o.rect.x0=o.center.x-o.effectiveSize,o.rect.x1=o.center.x+o.effectiveSize,o.center.y=.7*o.center.y+.3*(e.y+t.y*m),c(o.center.y,0,x-o.effectiveSize),o.rect.y0=o.center.y-o.effectiveSize,o.rect.y1=o.center.y+o.effectiveSize}d.rect={x0:0,y0:0,x1:d.size,y1:d.size},i.setDebug=function(e){var t,n,i=document.querySelector("#__aim-debug");if(e){if(i)return;var r=(t=d.size,(n=document.createElement("div")).setAttribute("id","__aim-debug"),n.style.width=2*t+"px",n.style.height=2*t+"px",n.style["margin-left"]=-t+"px",n.style["margin-top"]=-t+"px",document.body.appendChild(n),n);d.element=r}else i&&i.remove(),d.element=null;s=e},i.setAnticipateFunction=function(e){"function"==typeof e&&(y=e)};var v=function(e){var t=null;e instanceof HTMLElement&&(t=e.getBoundingClientRect());var n=t||e,i=n.x,r=n.y,c=n.width,a=n.height;return"100%"===c&&(i=0,c=window.innerWidth),"100%"===a&&(r=0,a=window.innerHeight),{rect:{x0:i,y0:r,x1:i+c,y1:r+a},center:{x:i,y:r},increment:0}};var h=function(e){return{id:e.id,target:e.target,rect:e.data.rect}},g=function(){var e=d;r.length&&(y(u,o,x,l,e),s&&(e.element.style.transform="translate(".concat(e.center.x,"px, ").concat(e.center.y,"px) scale(").concat(e.effectiveSize/e.size,")")),r.forEach(function(t){var n,i,r=t.target,c=t.data,a=t.options,o=(n=c.rect,i=e.rect,Math.max(0,Math.min(n.x1,i.x1)-Math.max(n.x0,i.x0))*Math.max(0,Math.min(n.y1,i.y1)-Math.max(n.y0,i.y0))/(d.effectiveSize*d.effectiveSize));if(o&&0!==f)return c.increment+=.2*o,void(1>c.increment&&c.increment<2?(a.className&&r instanceof HTMLElement&&r.classList.add(a.className),"function"==typeof a.aimEnter&&a.aimEnter.call(r,h(t)),s&&e.element.classList.add("__aim-debug--hit")):c.increment>2&&(c.increment=2,s&&e.element.classList.add("__aim-debug--high")));s&&setTimeout(function(){e.element.classList.remove("__aim-debug--hit"),e.element.classList.remove("__aim-debug--high")},0),0!==c.increment&&(c.increment-=.05,c.increment<0&&(c.increment=0,a.className&&r instanceof HTMLElement&&r.classList.remove(a.className),"function"==typeof a.aimExit&&a.aimExit.call(r,h(t))))}))},p=!0,b=function(e){x=e.clientX,l=e.clientY},E=!1;return i.start=function(){E||(E=!0,document.addEventListener("pointermove",b),p=!0,function e(){g(),p&&requestAnimationFrame(e)}())},i.stop=function(){E&&(E=!1,p=!1,document.removeEventListener("pointermove",b))},i.remove=function(e){var t=!1;return e instanceof HTMLElement?r.forEach(function(n){if(n.target===e)return n=null,void(t=!0)}):r.forEach(function(n){if(n.id===e.id)return n=null,void(t=!0)}),t&&(r=r.filter(Boolean)),t},i.updatePosition=function(e){var t=!1;return e instanceof HTMLElement?r.forEach(function(n){if(n.target===e){var i=v(e);return n.data.rect=i.rect,n.data.center=i.center,n.data.increment=i.increment,void(t=!0)}}):r.forEach(function(n){if(n.id===e.id){var i=v(e);return n.data.rect=i.rect,n.data.center=i.center,n.data.increment=i.increment,void(t=!0)}}),t},i});
//# sourceMappingURL=aim.umd.js.map
