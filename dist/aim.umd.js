!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).aim=t()}(this,function(){"use strict";var e=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})};function t(t){return function(t){var i=t.target;delete t.target;var r=d(i);r.options=t;var c=e();return n.push({id:c,target:i,data:r}),c}(t)}var n=[],i=function(e,t,n){return Math.min(Math.max(e,t),n)},r=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},c={x:0,y:0},a=r(c),o={x:0,y:0},f=12,x=0,m=0,u=!1,s={size:50,center:{x:0,y:0},effectiveSize:1};function l(e,t,n,c,o){var x=o;e.x&&e.y&&(t.x=.7*t.x+.3*(n-e.x),t.y=.7*t.y+.3*(c-e.y)),e.x=n,e.y=c,(a=r(t))<.1&&(t.x=0,t.y=0),x.effectiveSize=Math.sqrt(x.size*a+1),x.center.x=.7*x.center.x+.3*(e.x+t.x*f);var m=window.innerWidth,u=window.innerHeigh;i(x.center.x,0,m-x.effectiveSize),x.rect.x0=x.center.x-x.effectiveSize,x.rect.x1=x.center.x+x.effectiveSize,x.center.y=.7*x.center.y+.3*(e.y+t.y*f),i(x.center.y,0,u-x.effectiveSize),x.rect.y0=x.center.y-x.effectiveSize,x.rect.y1=x.center.y+x.effectiveSize}s.rect={x0:0,y0:0,x1:s.size,y1:s.size},t.setDebug=function(e){var t,n,i=document.querySelector("#aim-debug");if(e){if(i)return;var r=(t=s.size,(n=document.createElement("div")).setAttribute("id","aim-debug"),n.className="aim-debug",n.style.width=2*t+"px",n.style.height=2*t+"px",n.style["margin-left"]=-t+"px",n.style["margin-top"]=-t+"px",document.body.appendChild(n),n);s.element=r}else i&&i.remove(),s.element=null;u=e},t.setAnticipateFunction=function(e){"function"==typeof e&&(l=e)};var d=function(e){var t=null;e instanceof HTMLElement&&(t=e.getBoundingClientRect());var n=t||e,i=n.x,r=n.y;return{rect:{x0:i,y0:r,x1:i+n.width,y1:r+n.height},center:{x:i,y:r},increment:0}};var y=function(){var e=s;n.length&&(l(o,c,x,m,e),u&&(e.element.style.transform="translate(".concat(e.center.x,"px, ").concat(e.center.y,"px) scale(").concat(e.effectiveSize/e.size,")")),n.forEach(function(t){var n,i,r=t.target,c=t.data,o=(n=c.rect,i=e.rect,Math.max(0,Math.min(n.x1,i.x1)-Math.max(n.x0,i.x0))*Math.max(0,Math.min(n.y1,i.y1)-Math.max(n.y0,i.y0))/(s.effectiveSize*s.effectiveSize));if(o&&0!==a)return c.increment=c.increment+.2*o,void(c.increment>1&&c.increment<2?(c.options.className&&r.classList.add(c.options.className),"function"==typeof c.options.aimEnter&&c.options.aimEnter.call(r,{}),c.increment>2&&(c.increment=2),u&&(e.element.style["background-color"]="tomato")):c.increment>2&&(c.increment=2,u&&(e.element.style["background-color"]="tomato")));u&&(e.element.style["background-color"]="yellowgreen"),0!==c.increment&&(c.increment=c.increment-.05,c.increment<0&&(c.increment=0,c.options.className&&r.classList.remove(c.options.className),"function"==typeof c.options.aimExit&&c.options.aimExit.call(r,{})))}))},v=!0,p=function(e){x=e.clientX,m=e.clientY},h=!1;return t.start=function(){h||(h=!0,document.addEventListener("pointermove",p),v=!0,function e(){var t;y(),v?t=requestAnimationFrame(e):cancelAnimationFrame(t)}())},t.stop=function(){h&&(h=!1,v=!1,document.removeEventListener("pointermove",p))},t.remove=function(e){var t=!1;return e instanceof HTMLElement?n.forEach(function(n){if(n.target===e)return n=null,void(t=!0)}):n.forEach(function(n){if(n.id===e.id)return n=null,void(t=!0)}),t&&(n=n.filter(Boolean)),t},t.updatePosition=function(e){var t=!1;return e instanceof HTMLElement?n.forEach(function(n){if(n.target===e){var i=d(e);return n.data.rect=i.rect,n.data.center=i.center,n.data.increment=i.increment,void(t=!0)}}):n.forEach(function(n){if(n.id===e.id){var i=d(e);return n.data.rect=i.rect,n.data.center=i.center,n.data.increment=i.increment,void(t=!0)}}),t},t});
//# sourceMappingURL=aim.umd.js.map
