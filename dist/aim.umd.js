!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).aim=t()}(this,function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t=function(e){return[].slice.call(document.querySelectorAll(e),0)},n=function(){return(Math.random()+"").substr(2)};function i(i){var c=i.target,a=function(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),r.forEach(function(n){e(t,n,i[n])})}return t}({},i);if(delete a.target,"string"==typeof c){var o=t(c);if(o&&o.length){var u=[];return o.forEach(function(e){var t=n();r.push({id:t,target:e,data:v(e),options:a}),u.push(t)}),1===o.length?u[0]:u}}var f=n();return r.push({id:f,target:c,data:v(c),options:a}),f}var r=[],c=function(e,t,n){return Math.min(Math.max(e,t),n)},a=function(e){var t=e.x,n=e.y;return Math.sqrt(t*t+n*n)},o={x:0,y:0},u=a(o),f={x:0,y:0},s=0,m=0,l=!1,d={size:50,center:{x:0,y:0},effectiveSize:1};d.rect={x0:0,y0:0,x1:d.size,y1:d.size};var y=function(e){var t=e.position,n=e.velocity,i=e.pointerX,r=e.pointerY,o=e.anticipator;t.x&&t.y&&(n.x=.7*n.x+.3*(i-t.x),n.y=.7*n.y+.3*(r-t.y)),t.x=i,t.y=r,(u=a(n))<.1&&(n.x=0,n.y=0),o.effectiveSize=Math.sqrt(o.size*u+1),o.center.x=.7*o.center.x+.3*(t.x+12*n.x);var f=window.innerWidth,s=window.innerHeigh;c(o.center.x,0,f-o.effectiveSize),o.rect.x0=o.center.x-o.effectiveSize,o.rect.x1=o.center.x+o.effectiveSize,o.center.y=.7*o.center.y+.3*(t.y+12*n.y),c(o.center.y,0,s-o.effectiveSize),o.rect.y0=o.center.y-o.effectiveSize,o.rect.y1=o.center.y+o.effectiveSize};i.setDebug=function(e){var t,n,i=document.getElementById("#__aim-debug");if(e){if(i)return;d.element=(t=d.size,(n=document.createElement("div")).setAttribute("id","__aim-debug"),n.style.width=2*t+"px",n.style.height=2*t+"px",n.style["margin-left"]=-t+"px",n.style["margin-top"]=-t+"px",document.body.appendChild(n),n)}else d.element=null,i&&i.remove();l=e},i.setAnticipateFunction=function(e){y=e};var v=function(e){var t=null;e instanceof HTMLElement&&(t=e.getBoundingClientRect());var n=t||e,i=n.x,r=n.y,c=n.width,a=n.height;return"100%"===c&&(i=0,c=window.innerWidth),"100%"===a&&(r=0,a=window.innerHeight),{rect:{x0:i,y0:r,x1:i+c,y1:r+a},center:{x:i,y:r},increment:0}};var x=function(e){var t,n,i,r=e.item,c=e.intersectRatioValue;return{id:r.id,target:r.target,rect:r.data.rect,angle:(t=o,n=t.x,i=t.y,180*Math.atan2(i,n)/Math.PI),intersectRatioValue:c||0,pointerVelocity:o,pointerMagnitude:u}},h=function(){var e=d;r.length&&(y({position:f,velocity:o,pointerX:s,pointerY:m,anticipator:d}),l&&(e.element.style.transform="translate(".concat(e.center.x,"px, ").concat(e.center.y,"px) scale(").concat(e.effectiveSize/e.size,")")),r.forEach(function(t){var n,i,r=t.target,c=t.data,a=t.options,o=(n=c.rect,i=e.rect,Math.max(0,Math.min(n.x1,i.x1)-Math.max(n.x0,i.x0))*Math.max(0,Math.min(n.y1,i.y1)-Math.max(n.y0,i.y0))/(d.effectiveSize*d.effectiveSize));if(o&&0!==u)return c.increment+=.2*o,void(1<c.increment&&c.increment<2?(a.className&&r instanceof HTMLElement&&r.classList.add(a.className),"function"==typeof a.aimEnter&&a.aimEnter.call(r,x({item:t,intersectRatioValue:o})),l&&e.element.classList.add("__aim-debug--hit")):c.increment>2&&(c.increment=2,l&&e.element.classList.add("__aim-debug--hit-2")));l&&setTimeout(function(){e.element.classList.remove("__aim-debug--hit"),e.element.classList.remove("__aim-debug--hit-2")},0),0!==c.increment&&0===o&&(c.increment-=.05,c.increment<0&&(c.increment=0,a.className&&r instanceof HTMLElement&&r.classList.remove(a.className),"function"==typeof a.aimExit&&a.aimExit.call(r,x({item:t}))))}))},p=!0,g=function(e){s=e.clientX,m=e.clientY},b=!1;return i.start=function(){b||(b=!0,document.addEventListener("mousemove",g),p=!0,function e(){h(),p&&requestAnimationFrame(e)}())},i.stop=function(){b&&(b=!1,p=!1,document.removeEventListener("mousemove",g))},i.remove=function(e){var t=!1;return e instanceof HTMLElement?r.forEach(function(n){if(n.target===e)return n=null,void(t=!0)}):r.forEach(function(n){if(n.id===e.id)return n=null,void(t=!0)}),t&&(r=r.filter(Boolean)),t},i.updatePosition=function(e){var t=!1;return e instanceof HTMLElement?r.forEach(function(n){if(n.target===e){var i=v(e);return n.data.rect=i.rect,n.data.center=i.center,n.data.increment=i.increment,void(t=!0)}}):r.forEach(function(n){if(n.id===e.id){var i=v(e);return n.data.rect=i.rect,n.data.center=i.center,n.data.increment=i.increment,void(t=!0)}}),t},i});
//# sourceMappingURL=aim.umd.js.map
