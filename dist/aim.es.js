function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t=function(e){return[].slice.call(document.querySelectorAll(e),0)},n=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})};function r(r){var c=r.target,a=function(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(n){e(t,n,r[n])})}return t}({},r);if(delete a.target,"string"==typeof c){var o=t(c);if(o&&o.length){var f=[];return o.forEach(function(e){var t=n();i.push({id:t,target:e,data:v(e),options:a}),f.push(t)}),1===o.length?f[0]:f}}var u=n();return i.push({id:u,target:c,data:v(c),options:a}),u}var i=[],c=function(e,t,n){return Math.min(Math.max(e,t),n)},a=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},o={x:0,y:0},f=a(o),u={x:0,y:0},x=12,l=0,m=0,s=!1,d={size:50,center:{x:0,y:0},effectiveSize:1};function y(e,t,n,r,i){var o=i;e.x&&e.y&&(t.x=.7*t.x+.3*(n-e.x),t.y=.7*t.y+.3*(r-e.y)),e.x=n,e.y=r,(f=a(t))<.1&&(t.x=0,t.y=0),o.effectiveSize=Math.sqrt(o.size*f+1),o.center.x=.7*o.center.x+.3*(e.x+t.x*x);var u=window.innerWidth,l=window.innerHeigh;c(o.center.x,0,u-o.effectiveSize),o.rect.x0=o.center.x-o.effectiveSize,o.rect.x1=o.center.x+o.effectiveSize,o.center.y=.7*o.center.y+.3*(e.y+t.y*x),c(o.center.y,0,l-o.effectiveSize),o.rect.y0=o.center.y-o.effectiveSize,o.rect.y1=o.center.y+o.effectiveSize}d.rect={x0:0,y0:0,x1:d.size,y1:d.size},r.setDebug=function(e){var t,n,r=document.querySelector("#__aim-debug");if(e){if(r)return;var i=(t=d.size,(n=document.createElement("div")).setAttribute("id","__aim-debug"),n.style.width=2*t+"px",n.style.height=2*t+"px",n.style["margin-left"]=-t+"px",n.style["margin-top"]=-t+"px",document.body.appendChild(n),n);d.element=i}else r&&r.remove(),d.element=null;s=e},r.setAnticipateFunction=function(e){"function"==typeof e&&(y=e)};var v=function(e){var t=null;e instanceof HTMLElement&&(t=e.getBoundingClientRect());var n=t||e,r=n.x,i=n.y,c=n.width,a=n.height;return"100%"===c&&(r=0,c=window.innerWidth),"100%"===a&&(i=0,a=window.innerHeight),{rect:{x0:r,y0:i,x1:r+c,y1:i+a},center:{x:r,y:i},increment:0}};var h=function(e){return{id:e.id,target:e.target,rect:e.data.rect}},g=function(){var e=d;i.length&&(y(u,o,l,m,e),s&&(e.element.style.transform="translate(".concat(e.center.x,"px, ").concat(e.center.y,"px) scale(").concat(e.effectiveSize/e.size,")")),i.forEach(function(t){var n,r,i=t.target,c=t.data,a=t.options,o=(n=c.rect,r=e.rect,Math.max(0,Math.min(n.x1,r.x1)-Math.max(n.x0,r.x0))*Math.max(0,Math.min(n.y1,r.y1)-Math.max(n.y0,r.y0))/(d.effectiveSize*d.effectiveSize));if(o&&0!==f)return c.increment+=.2*o,void(1>c.increment&&c.increment<2?(a.className&&i instanceof HTMLElement&&i.classList.add(a.className),"function"==typeof a.aimEnter&&a.aimEnter.call(i,h(t)),s&&e.element.classList.add("__aim-debug--hit")):c.increment>2&&(c.increment=2,s&&e.element.classList.add("__aim-debug--high")));s&&setTimeout(function(){e.element.classList.remove("__aim-debug--hit"),e.element.classList.remove("__aim-debug--high")},0),0!==c.increment&&(c.increment-=.05,c.increment<0&&(c.increment=0,a.className&&i instanceof HTMLElement&&i.classList.remove(a.className),"function"==typeof a.aimExit&&a.aimExit.call(i,h(t))))}))},p=!0,b=function(e){l=e.clientX,m=e.clientY},E=!1;r.start=function(){E||(E=!0,document.addEventListener("pointermove",b),p=!0,function e(){g(),p&&requestAnimationFrame(e)}())},r.stop=function(){E&&(E=!1,p=!1,document.removeEventListener("pointermove",b))},r.remove=function(e){var t=!1;return e instanceof HTMLElement?i.forEach(function(n){if(n.target===e)return n=null,void(t=!0)}):i.forEach(function(n){if(n.id===e.id)return n=null,void(t=!0)}),t&&(i=i.filter(Boolean)),t},r.updatePosition=function(e){var t=!1;return e instanceof HTMLElement?i.forEach(function(n){if(n.target===e){var r=v(e);return n.data.rect=r.rect,n.data.center=r.center,n.data.increment=r.increment,void(t=!0)}}):i.forEach(function(n){if(n.id===e.id){var r=v(e);return n.data.rect=r.rect,n.data.center=r.center,n.data.increment=r.increment,void(t=!0)}}),t};export default r;
//# sourceMappingURL=aim.es.js.map
